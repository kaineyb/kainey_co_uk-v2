---
import BlogTags from "../components/blogs/BlogTags.astro";
import ContinueReadingLink from "../components/blogs/ContinueReadingLink.astro";
import Excerpt from "../components/blogs/Excerpt.astro";
import PostedBy from "../components/blogs/PostedBy.astro";
import SmallBlogHeader from "../components/blogs/SmallBlogHeader.astro";
import Layout from "../layouts/SideBarLayout.astro";

const posts = await Astro.glob("../pages/blog/*.mdx");
---

<Layout title="Welcome">
  <section>
    <h1>Latest Posts</h1>

    {
      posts.map((post) => (
        <article>
          <SmallBlogHeader
            title={post.frontmatter.title}
            description={post.frontmatter.description}
            slug={post.frontmatter.slug}
          />
          <PostedBy
            author={post.frontmatter.author}
            pubDate={post.frontmatter.pubDate}
          />
          <BlogTags tags={post.frontmatter.tags} />
          <Excerpt excerpt={post.frontmatter.excerpt} />
          <ContinueReadingLink slug={post.frontmatter.slug} />
        </article>
      ))
    }<hr /><a href="#"> View all Blogs &raquo;</a>
  </section>

  <style>
    @media screen and (min-width: 1024px) {
      section {
        grid-column-start: 1;
        grid-column-end: 9;
        grid-row-start: 1;
      }
    }

    article {
      margin-bottom: 5rem;
    }
    .blog-continue-reading {
      font-weight: bold;
      display: block;
      width: 100%;
      text-decoration: none;
      color: var(--color-body);
      border-bottom: 0.2rem solid var(--color-secondary);
    }
  </style>
</Layout>
